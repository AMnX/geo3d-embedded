<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
   	<title>Test SVG</title>
	     <script type="text/javascript">
	      function doAddStop()
	      {
			 id=document.inputform.newstop.value;
			 document.inputform.newstop.value=parseInt(id)+1;
	 		 n=document.inputform.stopname.value;
			 window.addStop(id, n);
			 appendArret(id, n)
			 document.inputform.stopname.value="ARRET"+document.inputform.newstop.value;
	      }


	      function doScale()
	      {
			 scale=document.inputform.scale.value
			 window.zoom(scale);
	      }

	      function appendArret(id, name)
	      {
	        var elOptNew = document.createElement('option');
	        elOptNew.text = name;
	        elOptNew.value = id;
	        var elSel = document.getElementById('arretlist');

	        try {
	          elSel.add(elOptNew, null); // standards compliant; doesn't work in IE
	        }
	        catch(ex) {
	          elSel.add(elOptNew); // IE only
	        }
	      }

	      function doCreate()
	      {/*
	    			var pts=[ 	["50100", "Chatelet-les-Halles"],
	    					["50101", "Saint-Michel"],
	    					["50102", "Port Royal"],
	    					["50103","Luxembourg"],
	    					["50104","Denfert Rochereau"],
	    					["50105","Cite Universitaire"],
	    				];*/

	    				/*	var pts=[ 	["50100", "Chatelet-les-Halles"],
    					["50101", "Saint-Michel"],
    					["50102", "Port Royal"],
    					["50103","Luxembourg"],
    					["50104","Denfert Rochereau"],
    					["50105","Cite Universitaire"],
    				];

    
    			}*/

    			var pts=[[ "50100", "BONNEVAL"],
	    			["50101", "CHABRIERES"],
	    			["50102", "ROCHASSON"],
	    			["50103", "ARISTIDE BRIAND"],
	    			["50104", "CHAMPSAUR"],
	    			["50105",   "FAURE DU SERRE"],
	    			["50106",   "VERDUN"],
	    			["50107",   "HOPITAL"],
	    			["50108",   "PORTE COLOMBE"],
	    			["50109",   "FLORIAN"],
	    			["50110",   "JAURES"],
	    			["50111",   "VILLENEUVE"],
	    	  		["50112",   "STADE"],
	    	  		["50113", 	  "EGLISE ST ROCH"],
	    	  		["50114", 	  "PERVENCHES"],
	    	  		["50115",   "FOYER DE FONREYNE"],
	    	  		["50116", 	  "BOSQUET"],
	    	  		["50117", 	  "STADE NAUTIQUE"],
	    	  		["50118",   "COLLÈGE SUD"],
	    	 		["50119", 	  "LES TERRASSES"],
	    	 		["50120", 	  "GRAFFINEL"],
	    	  		["50121", 	  "CARREFOUR DE ST JEAN"],
	    	  		["50122", 	  "MICROPOLIS"],
	    	  		["50123", 	  "LES CHÊNES"],
	    	  		["50124", 	  "LACHAUP"],
	    	 		["50125", 	  "SERVIOLAN"]
    	 		];

	    			for (var i=0; i<pts.length; i++){
	    				pid=pts[i][0];
	    				pname=pts[i][1];
	    				appendArret(pid, pname);
	    				window.addStop(pid, pname);
	    			}

	      }

	      function doTest()
	      {
			window.test();
	      }

	      function doReset()
	      {
			 var rang= window.reset();
	      }


	      function doBackground()
	      {
                       var svg = document.getElementById("graphline");
                       style = svg.getAttribute("style");
                       if (style == "overflow: hidden; background-color: yellow;"){
                            svg.setAttribute("style","overflow:hidden; background-color:white");
                       }
                       else{
                            svg.setAttribute("style","overflow:hidden; background-color:yellow");
                       }
	      }


	      function doAction(){
	    	//  var boxLength = document.inputform.arretlist.length;
	    	  var selectedItem = document.inputform.arretlist.selectedIndex;
	    	//  var selectedText = document.inputform.arretlist.options[selectedItem].text;
	    	  var id = document.inputform.arretlist.options[selectedItem].value;
	    	  inside=document.inputform.inside.checked;
	    	  window.setCurrentStop(id, inside);
	      }

	      	      
	     </script>
  </head>
  <body style="overflow:hidden" background="logo_exploitant.png">
         <div align="center" height="75%" top="0px" position="absolute">
         	<script language="Javascript">
			<!--
			var version=0;
			if(navigator.userAgent.indexOf("Firefox")!=-1){
				var strVersion = navigator.userAgent
				var versionindex=strVersion.indexOf("Firefox")+8
				strVersion = strVersion.substr (versionindex)
				version = parseInt(strVersion.charAt(0));
							
				//alert("You are using Firefox :" + version + " ("+strVersion+")")
			} 

			if (version >= 3){
				//alert("embedded SVG sans width (firefox >= 3)")
				document.write("<embed id='graphline' noscroll='yes' src='graph-ligne.svg' type='image/svg+xml' style='opacity=0.9' />");
			}
			else{
				//alert("embedded SVG AVEC width (firefox < 3)")
				document.write("<embed id='graphline' width='100%' height='880' style='overflow:hidden; background-color:white' noscroll='yes' src='graph-ligne.svg' type='image/svg+xml' />");
			}
			//-->
			</script> 
	     	
	     </div>
	     <div height="200px" bottom="0px" position="absolute">
	     <form name="inputform">
	       <input style="background-color:red" type="button" value="Reset" onclick="doReset()">
	       <input style="background-color:yellow" type="button" value="Creer Ligne par defaut" onclick="doCreate()">
	       <input style="background-color:blue" type="button" value="Avance" onclick="doTest()">
	       <input style="background-color:pink" type="button" value="Change Background" onclick="doBackground()"><br/>
		 <br />
		Nom Arret :<input name="stopname" type="text" value="ARRET100" size="10"/> id   : <input name="newstop" type="text" value="100" size="2"/> <input type="button" value="Ajouter arret" onclick="doAddStop()">    <br />
		<br />
		Arret Courant:   
							      <SELECT id="arretlist" size="1" onchange="doAction()">

							      </SELECT>
							      <input name="inside" type="checkbox" value="1"/>A l'arret 
							      <br />
		
	       
		Echelle :<input name="scale" type="text" value="1.223" size="5"/>    <input type="button" value="Echelle" onclick="doScale()"><br/>
	        
	     </form>
	</div>
  </body>

</html>



